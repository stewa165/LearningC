{
  "name": "start-stop-daemon",
  "description": "Easily transform a JS script into a start-stop-daemon script",
  "version": "0.1.0",
  "author": {
    "name": "Jie Meng-Gerard",
    "email": "contact@jie.fr"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/jiem/start-stop-daemon"
  },
  "keywords": [
    "daemon",
    "supervisor",
    "monitor",
    "sysadmin",
    "tools"
  ],
  "main": "./index.js",
  "engines": {
    "node": "0.8.x"
  },
  "dependencies": {
    "forever": "0.10.0"
  },
  "readme": "# start-stop-daemon\n\nEasily transform a JS script into a start-stop-daemon script.\n\n## Installation\n\n    npm install start-stop-daemon\n\n## Usage\n\n    //file script.js    \n    startStopDaemon([options], function() {\n      //awesome code you want to daemonize\n    });\n\n* Start your script as a daemon with the command `node script.js start`\n* Stop the daemon with the command `node script.js stop`\n* Restart the daemon with the command `node script.js restart`\n* Get the status of the daemon with the command `node script.js status`\n* Run the script normally (not as a daemon) with the command `node script.js`\n    \n## Options\n\n* `outFile`: the file to log the daemon stdout. Default to `'out.log'`.\n* `errFile`: the file to log the daemon stderr. Default to `'err.log'`.\n* `max`: the max number of times the script should run. Default to `5`.\n* ...\n\nMore options documented on the [forever-monitor page][0].  \nOptions can also be passed from the command-line: `node script.js start --outFile custom.log` (more details [here][1]).\n\n## Events\n\nAvailable events: `'error'`, `'start'`, `'stop'`, `'restart'`, `'exit'`, `'stdout'`, `'stderr'` (more details [here][2]).  \nUse the `on` method to add a listener:\n\n    startStopDaemon(function() {\n      //code to daemonize\n    }).on(event, listener);  \n\n**Note:** In previous versions (<= 0.1.0), daemon's unexpected crashes were handled by the option `onCrash`.  \nThe same behavior can now be obtained by using the event `'restart'`. See the example below.\n\n\n## Example 1: `server.js`, a simple http server daemon\n\n``` js\n  var startStopDaemon = require('start-stop-daemon');\n  var http = require('http');\n\n  startStopDaemon(function() {  \n    http.createServer(function(req, res) {           \n      console.log(req.connection.remoteAddress + ' accessed ' + req.url);\n      if (req.url === '/error') \n        throw new Error('to crash server');        \n      res.end('Hello world! Thanks for accessing ' + req.url);        \n    }).listen(1095);    \n  })\n\n  .on('restart', function() {\n    //use this.stdout.write to write in the stdout log file, not console.log\n    this.stdout.write('Restarting at ' + new Date() + '\\n'); \n  });\n```\n\n* Start the server as a daemon with `node server.js start`  \n* Test the server in the browser at *http://localhost:1095*  \n* Make the server crash by going to *http://localhost:1095/error*  \n* Go back to *http://localhost:1095* to check that the server restarted correctly after the crash    \n* Get the server's status with `node server.js status`    \n* Stop the server with `node server.js stop`    \n* Check the stdout file `out.log`    \n\n## Example 2: `crasher.js`, a timer daemon that crashes every second\n\n``` js\n  var startStopDaemon = require('start-stop-daemon');\n\n  var options = {\n    outFile: 'customOutFile.log',   \n    errFile: 'customErrFile.log',\n    max: 3 //the script will run 3 times at most\n  };\n\n  startStopDaemon(options, function() {\n    var count = 0;\n    setInterval(function() {\n      console.log(++count * 200 + 'ms');\n      if (count >= 5) {\n        console.log('timer crashing after 1 second\\n');\n        throw new Error('to crash timer');                       \n      }\n    }, 200);      \n  });\n```\n\n* Start the timer as a daemon with `node crasher.js start`  \n* Wait 4 seconds then get the timer's status with `node crasher.js status` to check that the daemon correctly exited  \n* Check the log files `customOutFile.log` and `customErrFile.log`.     \n    \n## Implementation\n\nAs of version 0.1.0, daemons are handled by the [forever][3] module.\nThis refactoring makes `start-stop-daemon` much more robust than with my previous implementation.\nBackward compatibility (versions <= 0.1.0) is ensured for the options except for the events (`onStart`, `onCrash`, ...)\nwhich are now handled through an `EventEmitter` with a proper `on` method ([more here][2]).\nCommand-line options are not backward compatible since they are now merged with the forever ones ([more here][1]).\n\n\n## MIT License \n\nCopyright (c) 2012 Jie Meng-Gerard <contact@jie.fr>\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n[0]: https://github.com/nodejitsu/forever-monitor#options-available-when-using-forever-in-nodejs\n[1]: https://github.com/nodejitsu/forever#using-forever-from-the-command-line\n[2]: https://github.com/nodejitsu/forever-monitor#events-available-when-using-an-instance-of-forever-in-nodejs\n[3]: https://github.com/nodejitsu/forever",
  "readmeFilename": "README.md",
  "_id": "start-stop-daemon@0.1.0",
  "_from": "start-stop-daemon@"
}
